# data 声明为函数返回

在创建或注册模板的时候，传入一个 data 属性作为用来绑定的数据。但是在组件中，data 必须是一个函数，而不能直接把一个对象赋值给它。

```js
Vue.component('my-component', {
  template: '<div>OK</div>',
  data() {
    return {}; // 返回一个唯一的对象，不要和其他组件共用一个对象进行返回
  },
});
```

下面这个是官方的解答：
当一个组件被定义， data 必须声明为返回一个初始数据对象的函数，因为组件可能被用来创建多个实例。如果 data 仍然是一个纯粹的对象，则所有的实例将共享引用同一个数据对象！通过提供 data 函数，每次创建一个新实例后，我们能够调用 data 函数，从而返回初始数据的一个全新副本数据对象。

类比与引用数据类型。如果不用 function return 每个组件的 data 都是内存的同一个地址，那一个数据改变其他也改变了，这当然就不是我们想要的。用 function return 其实就相当于申明了新的变量，相互独立，自然就不会有这样的问题；js 在赋值 object 对象时，是直接一个相同的内存地址。所以为了每个组件的 data 独立，采用了这种方式。
如果不是组件的话，正常 data 的写法可以直接写一个对象，比如 data：{ msg ： ' 下载 ' }

由于组件是会在多个地方引用的，JS 中直接共享对象会造成引用传递，也就是说修改了 msg 后所有按钮的 msg 都会跟着修改，所以这里用 function 来每次返回一个对象实例。

总的来说就是对象的赋值是浅拷贝（即改变引用值指针地址），在实例化的时候，多个组件中 data 指针都是指的同一个地址，自然会乱套。
